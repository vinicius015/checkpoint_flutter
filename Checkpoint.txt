import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Checkpoint',
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
        useMaterial3: true,
      ),
      home: const CadastrarLivro(),
    );
  }
}

class CadastrarLivro extends StatefulWidget {
  const CadastrarLivro({super.key});

  @override
  State<CadastrarLivro> createState() => _CadastrarLivroState();
}

class _CadastrarLivroState extends State<CadastrarLivro> {
  final _formKey = GlobalKey<FormState>();
  final TextEditingController _tituloController = TextEditingController();
  final TextEditingController _codigoISBNController = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Padding(
          padding: const EdgeInsets.all(40.0),
          child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              crossAxisAlignment: CrossAxisAlignment.center,
              children: [
                Form(
                    key: _formKey,
                    child: Column(
                      children: [
                        TextFormField(
                          controller: _tituloController,
                          validator: (value) {
                            if (_tituloController.value.text.length < 3) {
                              return 'O título deve conter pelo menos 3 caracteres';
                            }
                          },
                          decoration: const InputDecoration(
                            label: Text('Título'),
                          ),
                        ),
                        const SizedBox(
                          height: 25,
                        ),
                        TextFormField(
                          controller: _codigoISBNController,
                          validator: (value) {
                            if (int.tryParse(
                                    _codigoISBNController.value.text) ==
                                null) {
                              return 'O código ISBN deve conter apenas números';
                            }
                          },
                          decoration: const InputDecoration(
                            label: Text('Código ISBN'),
                          ),
                        ),
                        const SizedBox(
                          height: 25,
                        ),
                        ElevatedButton(
                            onPressed: () async {
                              if (_formKey.currentState!.validate()) {
                                Navigator.push(
                                    context,
                                    MaterialPageRoute(
                                        builder: (context) => ConfirmationPage(
                                            tituloLivro:
                                                _tituloController.text)));
                              }
                            },
                            child: const Row(
                              children: [
                                Icon(Icons.save),
                                SizedBox(width: 5),
                                Text('Adicionar')
                              ],
                            ))
                      ],
                    ))
              ])),
    );
  }
}

class ConfirmationPage extends StatefulWidget {
  final String tituloLivro;
  const ConfirmationPage({super.key, required this.tituloLivro});

  @override
  State<ConfirmationPage> createState() => _ConfirmationPageState();
}

class _ConfirmationPageState extends State<ConfirmationPage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Padding(
        padding: const EdgeInsets.all(40.0),
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          crossAxisAlignment: CrossAxisAlignment.center,
          children: [
            ColoredBox(
              color: Colors.green,
              child: Text(
                'Livro ${widget.tituloLivro} adicionado à coleção!',
                style: const TextStyle(fontSize: 25),
              ),
            )
          ],
        ),
      ),
    );
  }
}
